# File Organizer для macOS

Мощный Bash скрипт для реорганизации файлов и папок с интеллектуальной обработкой дубликатов.

## Возможности

✅ **Извлечение файлов из папок первого уровня**  
✅ **Объединение папок с дублирующимися названиями**  
✅ **Поиск дубликатов по хэшу (MD5/SHA256)**  
✅ **Интерактивный интерфейс для удаления дубликатов**  
✅ **Подробная статистика и логирование**  

## Установка и запуск

### 1. Сделайте скрипт исполняемым

```bash
chmod +x file_organizer.sh
```

### 2. Запустите скрипт

```bash
./file_organizer.sh
```

## Как работает

### Шаг 1: Извлечение файлов и папок
- Сканирует все папки в текущей директории
- Перемещает **файлы и папки** из папок первого уровня в папку `organized_files`
- Автоматически решает конфликты имен (добавляет `_1`, `_2` и т.д.)
- Удаляет пустые папки
- **Не изменяет исходную структуру** - результат в отдельной папке

### Шаг 2: Объединение дубликатов папок
- Находит папки с одинаковыми названиями в `organized_files`
- Объединяет их содержимое в одну папку
- Сохраняет все файлы и подпапки, решая конфликты имен

### Шаг 3: Поиск дубликатов файлов
- Вычисляет хэш каждого файла (MD5 или SHA256)
- Находит идентичные файлы по хэшу
- Предлагает варианты удаления:
  - Удалить все дубликаты (оставить первый)
  - Просмотреть и выбрать вручную
  - Показать детальную информацию
  - Пропустить удаление

## Пример работы

```
File Organizer Script for macOS
==================================

[ИНФО] Рабочая директория: /path/to/folder
[ИНФО] Папка для результата: /path/to/folder/organized_files

[ИНФО] Шаг 1: Извлечение файлов и папок из папок первого уровня...
[ИНФО] Создана папка для результата: /path/to/folder/organized_files
[ИНФО] Обработка папки: downloads
  Извлечена папка: images
  Извлечен файл: document.pdf
  Извлечен файл: video.mp4
[УСПЕХ] Извлечено 15 элементов из 3 папок

[ИНФО] Шаг 2: Поиск папок с дублирующимися названиями...
[ПРЕДУПРЕЖДЕНИЕ] Найдено 2 названия папок с дубликатами:
  - photos
  - documents
[ИНФО] Объединение папок с именем: photos
  Объединение: photos -> photos
[УСПЕХ] Объединено 2 папок в photos

[ИНФО] Шаг 3: Проверка дубликатов файлов по хэшу...
[ПРЕДУПРЕЖДЕНИЕ] Найдены дубликаты файлов по хэшу:
  Хэш: a1b2c3d4... (2 копии)
    - image.jpg (2.5 MB)
    - image_1.jpg (2.5 MB)

Найдены дубликаты файлов! Выберите опцию:
1) Удалить все дубликаты (оставить первое вхождение)
2) Просмотреть дубликаты один за другим
3) Пропустить удаление
4) Показать детальную информацию о файлах

Введите ваш выбор (1-4): 1
[ИНФО] Удаление всех дубликатов (сохранение первого вхождения)...
  Удаление: image_1.jpg
[УСПЕХ] Удалено 1 дубликат файлов

[УСПЕХ] Организация файлов завершена!

Итоговая статистика:
  Файлов: 42
  Папок: 5
  Общий размер: 125.7 MB
  Результат в: /path/to/folder/organized_files
```

## Безопасность

- Скрипт создает временные файлы в `.temp_organizer`
- Все временные данные автоматически удаляются
- Подтверждение перед удалением дубликатов
- Подробное логирование всех действий

## Требования

- macOS (любая версия)
- Bash/Zsh (встроен в macOS)
- Стандартные утилиты: `find`, `grep`, `stat`, `md5`/`shasum`

## Советы

1. **Сделайте бэкап** перед первым запуском
2. **Запустите в тестовой папке** для проверки
3. **Используйте опцию 4** для детального просмотра дубликатов
4. **Скрипт можно остановить** в любой момент (Ctrl+C)

## Устранение проблем

### Ошибка "Permission denied"
```bash
chmod +x file_organizer.sh
```

### Ошибка "Command not found"
Убедитесь что вы в правильной директории:
```bash
ls -la file_organizer.sh
```

### Скрипт работает медленно
Для больших папок (>10,000 файлов) процесс может занять время из-за вычисления хэшей.

## Кастомизация

Можно изменить поведение скрипта, отредактировав переменные в начале:
- `WORK_DIR` - рабочая директория
- Цвета вывода
- Алгоритм хэширования

## Лицензия

MIT License - используйте на свой страх и риск.
# waybacmachine-files-extrctor
